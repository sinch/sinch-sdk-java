/*
 * Conversation API | Sinch
 *
 * OpenAPI document version: 1.0
 * Contact: support@sinch.com
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * Do not edit the class manually.
 */

package com.sinch.sdk.domains.conversation.api.v1;

import com.sinch.sdk.core.exceptions.ApiException;
import com.sinch.sdk.core.exceptions.ApiMappingException;
import com.sinch.sdk.domains.conversation.models.v1.webhooks.Webhook;
import com.sinch.sdk.domains.conversation.models.v1.webhooks.events.ConversationWebhookEvent;
import com.sinch.sdk.domains.conversation.models.v1.webhooks.request.CreateWebhookRequest;
import com.sinch.sdk.domains.conversation.models.v1.webhooks.response.WebhooksListResponse;
import java.util.Map;

/** Webhooks Service */
public interface WebhooksService {

  /**
   * List webhooks
   *
   * <p>List all webhooks for a given app as specified by the App ID.
   *
   * @param appId The unique ID of the app. You can find this on the [Sinch
   *     Dashboard](https://dashboard.sinch.com/convapi/apps). (required)
   * @return WebhooksListResponse
   * @throws ApiException if fails to make API call
   */
  WebhooksListResponse list(String appId) throws ApiException;

  /**
   * Create a new webhook
   *
   * <p>Creates a webhook for receiving callbacks on specific triggers. You can create up to 5
   * webhooks per app.
   *
   * @param createWebhookRequest Required. The Webhook to create (required)
   * @return Webhook
   * @throws ApiException if fails to make API call
   */
  Webhook create(CreateWebhookRequest createWebhookRequest) throws ApiException;

  /**
   * The Sinch Platform can initiate callback requests to a URL you define (Callback URL) on request
   * and result events. All callback requests are signed and the signature is included in the
   * Authorization header of the request
   *
   * <p>By using following function, you can ensure authentication according to received payload
   * from your backend
   *
   * @param secret Secret token to be used to validate received request. See <a href=
   *     "https://dashboard.sinch.com/convapi/apps">App's webhook configuration onto dashboard</a>
   * @param headers Received headers
   * @param jsonPayload Received payload
   * @return Is authentication is validated (true) or not (false)
   *     <p>see <a
   *     href="https://developers.sinch.com/docs/conversation/callbacks/#validating-callbacks">online
   *     documentation</a>
   * @since 1.3
   */
  boolean validateAuthenticationHeader(
      String secret, Map<String, String> headers, String jsonPayload);

  /**
   * This function can be called to deserialize received payload onto callback onto proper java
   * verification event class
   *
   * @param jsonPayload Received payload to be deserialized
   * @return The verification event instance class
   *     <p>see <a
   *     href="https://developers.sinch.com/docs/conversation/callbacks/#webhook-triggers">triggered
   *     events</a>
   * @since 1.3
   */
  ConversationWebhookEvent parseEvent(String jsonPayload) throws ApiMappingException;

  /**
   * Delete an existing webhook
   *
   * <p>Deletes a webhook as specified by the webhook ID.
   *
   * @param webhookId The unique ID of the webhook. (required)
   * @throws ApiException if fails to make API call
   */
  void delete(String webhookId) throws ApiException;

  /**
   * Get a webhook
   *
   * <p>Get a webhook as specified by the webhook ID.
   *
   * @param webhookId The unique ID of the webhook. (required)
   * @return Webhook
   * @throws ApiException if fails to make API call
   */
  Webhook get(String webhookId) throws ApiException;

  /**
   * Update an existing webhook
   *
   * <p>Updates an existing webhook as specified by the webhook ID.
   *
   * @param webhookId The unique ID of the webhook. (required)
   * @param webhook Required. The Webhook to update (required)
   * @return Webhook
   * @throws ApiException if fails to make API call
   */
  Webhook update(String webhookId, Webhook webhook) throws ApiException;
}
